<script>
  // Scroll reveal
  const sections = document.querySelectorAll('section');
  window.addEventListener('scroll', () => {
    const trigger = window.innerHeight / 1.2;
    sections.forEach(sec => { if (sec.getBoundingClientRect().top < trigger) sec.classList.add('visible'); });
  });

  // Carousel with autoplay
  const track = document.querySelector('.carousel-track');
  const images = Array.from(track.children);
  const prevBtn = document.querySelector('.carousel-btn.prev');
  const nextBtn = document.querySelector('.carousel-btn.next');
  let index = 0;
  function updateCarousel() {
    const width = images[0].clientWidth;
    track.style.transform = `translateX(-${index*width}px)`;
    images.forEach(img => img.classList.toggle('active', images.indexOf(img)===index));
  }
  prevBtn.addEventListener('click', () => { index = (index-1+images.length)%images.length; updateCarousel(); });
  nextBtn.addEventListener('click', () => { index = (index+1)%images.length; updateCarousel(); });
  setInterval(() => { index = (index+1)%images.length; updateCarousel(); }, 4000);
  updateCarousel();

  // Microloader y mensaje de éxito al enviar formulario
  const form = document.querySelector('.contact-form');
  const submitButton = form.querySelector('button');
  const loadingText = document.createElement('div');
  loadingText.className = 'loading';
  loadingText.textContent = 'Enviando...';
  const successText = document.createElement('div');
  successText.className = 'loading';
  successText.style.display = 'none';
  successText.style.color = '#00ff66';
  successText.textContent = '¡Gracias! Tu mensaje fue enviado.';
  form.appendChild(loadingText);
  form.appendChild(successText);

  form.addEventListener('submit', (e) => {
    loadingText.style.display = 'block';
    submitButton.disabled = true;
    submitButton.style.opacity = '0.6';
    setTimeout(() => {
      loadingText.style.display = 'none';
      successText.style.display = 'block';
      form.reset();
      submitButton.disabled = false;
      submitButton.style.opacity = '1';
    }, 3000);
  });

  // Fade-in especial para "¿Quiénes Somos?"
  window.addEventListener('load', () => {
    const quienesSomos = document.querySelector('#quienes-somos p');
    quienesSomos.style.opacity = 0;
    quienesSomos.style.transform = 'translateY(20px)';
    quienesSomos.style.transition = 'opacity 2s ease, transform 2s ease';
    setTimeout(() => {
      quienesSomos.style.opacity = 1;
      quienesSomos.style.transform = 'translateY(0)';
    }, 800);
  });

  // Fade in/out de textos de servicios
  const serviceTexts = document.querySelectorAll('.service h3, .service p');
  setInterval(() => {
    serviceTexts.forEach(text => {
      if (text.style.opacity === '0' || text.style.opacity === '') {
        text.style.opacity = '1';
      } else {
        text.style.opacity = '0';
      }
    });
  }, 5000);

  // Parallax efecto en el fondo del header
  const header = document.querySelector('header');
  window.addEventListener('scroll', () => {
    const offset = window.scrollY;
    header.style.backgroundPositionY = offset * 0.5 + 'px';
  });
</script>
